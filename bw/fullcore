/* This input file defines the full MHTGR350 geometry. 
*  Reflector is defined as a block, without the coolant channels.
*/

/* Numbering:
* Universes: 1 to 10
* Surfaces: 100 to 200
* Cells: 500 to 600
*/

/******************************
*      Particle Definition    *
* Kernel radius 212.5e-6 m    *
* Buffer radius 312.5e-6 m    *
* IPyC radius   347.5e-6 m    *
* SiC radius    382.5e-6 m    *
* OPyC radius   422.5e-6 m    *
* Matrix Graphite             *
*******************************/
% -- Coated Particle
particle 1

uco    0.02125
buffer 0.03125
pyc    0.03475
sic    0.03825
pyc    0.04225
matrix

/*************************
*     Fuel column        *
* Radius 0.6223 cm       *
* Length 79.3 cm         *
* Packing Fraction 0.35  *
**************************/

surf 100 inf
surf 101 inf
surf 102 inf

cell 500 2 matrix -100
cell 501 3 helium -101
cell 502 4 block  -102

pbed 5 2 "particles79.inp"

% -- Fuel Channel
surf 110 cyl 0.0 0.0 0.6223 0.0 79.3
surf 111 cyl 0.0 0.0 0.635  0.0 79.3

cell 510 6 fill 5  -110
cell 511 6 fill 3   110 -111
cell 512 6 fill 4   111

% -- Small Coolant Channel
surf 112 cyl 0.0 0.0 0.635 0.0 79.3

cell 513 7 fill 3  -112
cell 514 7 fill 4   112

% -- Large Coolant Channel
surf 113 cyl 0.0 0.0 0.794 0.0 79.3

cell 515 8 fill 3 -113
cell 516 8 fill 4  113

% -- Standard Fuel lattice
lat 10 2 0.0 0.65 24 24 1.879
4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
 4 4 4 4 4 4 4 4 4 4 4 4 6 6 8 6 6 8 6 6 8 6 6 4
  4 4 4 4 4 4 4 4 4 4 4 6 8 6 6 8 6 6 8 6 6 8 6 4
   4 4 4 4 4 4 4 4 4 4 8 6 6 8 6 6 8 6 6 8 6 6 8 4
    4 4 4 4 4 4 4 4 4 6 6 8 6 6 8 6 6 8 6 6 8 6 6 4
     4 4 4 4 4 4 4 4 6 8 6 6 8 6 6 8 6 6 8 6 6 8 6 4
      4 4 4 4 4 4 4 8 6 6 8 6 6 8 6 6 8 6 6 8 6 6 8 4
       4 4 4 4 4 4 6 6 8 6 6 8 6 6 8 6 6 8 6 6 8 6 6 4
        4 4 4 4 4 6 8 6 6 8 6 6 8 6 6 8 6 6 8 6 6 8 6 4
         4 4 4 4 8 6 6 8 6 6 8 6 6 7 6 6 8 6 6 8 6 6 8 4
          4 4 4 6 6 8 6 6 8 6 6 7 4 4 7 6 6 8 6 6 8 6 6 4
           4 4 6 8 6 6 8 6 6 8 6 4 4 4 6 8 6 6 8 6 6 8 6 4
            4 4 6 6 8 6 6 8 6 6 7 4 4 7 6 6 8 6 6 8 6 6 4 4
             4 4 8 6 6 8 6 6 8 6 6 7 6 6 8 6 6 8 6 6 8 4 4 4
              4 4 6 8 6 6 8 6 6 8 6 6 8 6 6 8 6 6 8 6 4 4 4 4
               4 4 6 6 8 6 6 8 6 6 8 6 6 8 6 6 8 6 6 4 4 4 4 4
                4 4 8 6 6 8 6 6 8 6 6 8 6 6 8 6 6 8 4 4 4 4 4 4
                 4 4 6 8 6 6 8 6 6 8 6 6 8 6 6 8 6 4 4 4 4 4 4 4
                  4 4 6 6 8 6 6 8 6 6 8 6 6 8 6 6 4 4 4 4 4 4 4 4
                   4 4 8 6 6 8 6 6 8 6 6 8 6 6 8 4 4 4 4 4 4 4 4 4
                    4 4 6 8 6 6 8 6 6 8 6 6 8 6 4 4 4 4 4 4 4 4 4 4
                     4 4 6 6 8 6 6 8 6 6 8 6 6 4 4 4 4 4 4 4 4 4 4 4
                      4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
                       4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4

% -- Standard Fuel Element Definition
surf 114 cyl 0.0 0.0 1.75 52.9 79.3
surf 115 hexyprism 0.0 0.0 18.0 0.0 79.3

cell 517 9 fill 3  -114
cell 518 9 fill 10  114 -115
cell 519 9 fill 4   115

% -- Core Lattice
lat 11 3 -18.0 -18.0 20 20 36.0
4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
  4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
   4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
    4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
     4 4 4 4 4 4 4 4 4 4 4 9 9 9 9 4 4 4 4 4
      4 4 4 4 4 4 4 4 4 9 9 9 9 9 9 9 4 4 4 4
       4 4 4 4 4 4 4 4 9 9 9 9 9 9 9 9 4 4 4 4
        4 4 4 4 4 4 4 9 9 9 4 4 4 9 9 9 4 4 4 4
         4 4 4 4 4 4 9 9 9 4 4 4 4 9 9 9 4 4 4 4
          4 4 4 4 4 4 9 9 4 4 4 4 4 9 9 4 4 4 4 4
           4 4 4 4 4 9 9 9 4 4 4 4 9 9 9 4 4 4 4 4
            4 4 4 4 4 9 9 9 4 4 4 9 9 9 4 4 4 4 4 4
             4 4 4 4 4 9 9 9 9 9 9 9 9 4 4 4 4 4 4 4
              4 4 4 4 4 9 9 9 9 9 9 9 4 4 4 4 4 4 4 4
               4 4 4 4 4 4 9 9 9 9 4 4 4 4 4 4 4 4 4 4
                4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
                 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
                  4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
                   4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4

surf 116 cyl 0.0 0.0 290 0.0 79.3

cell 520 12 fill 11 -116
cell 521 12 fill 4   116

% -- Core Lattice Stack
lat 13 9 0.0 0.0 10
   0.0 12  79.3 12 158.6 12 237.9 12 317.2 12
 396.5 12 475.8 12 555.1 12 634.4 12 713.7 12

surf 140 cyl 0.0 0.0 330    0 793
surf 141 cyl 0.0 0.0 330 -160   0
surf 142 cyl 0.0 0.0 330  793 913
surf 143 cyl 0.0 0.0 330 -160 913

cell 540 0 fill 13  -140
cell 541 0 fill 4   -141
cell 542 0 fill 4   -142
cell 543 0 outside   143

/**********************************
*            Materials            *
* Kernel UCO Density (d) 10.5g/cc *
* - U (e% = 15.5%) 1              *
* - C 0.5                         *
* - O 1.5                         *
* Buffer d 1.0g/cc                *
* - C 100%                        *
* PyC d 1.9g/cc                   *
* - C 100%                        *
* SiC d 3.18g/cc                  *
* - Si 70.05%                     *
* - C  29.96%                     * 
* Matrix Graphite                 *
**********************************/

mat uco      -10.5        tmp 750                 rgb 255 255 0
 92235.06c   -0.1376
 92238.06c   -0.7504
  6000.06c   -0.0224
  8016.06c   -0.0896

mat buffer   -1.0         tmp 750 moder grph 6000 rgb 255 128   0
 6000.06c    -1.0000

mat pyc      -1.9         tmp 750 moder grph 6000 rgb 255   0   0
 6000.06c    -1.0000

mat sic      -3.2         tmp 750 moder grph 6000 rgb 153  76   0
14028.06c    -0.64446
14029.06c    -0.035025
14030.06c    -0.020915
 6000.06c    -0.2996

mat matrix   -1.75        tmp 750 moder grph 6000 rgb 160 160 160
 6000.06c    -1.0000

mat block    -1.85        tmp 750 moder grph 6000 rgb 155 255 232
 6000.06c    -1.0000

mat helium   -0.0041881   tmp 750                 rgb 150 105 255
 2004.06c    -1.0

% --- Thermal scattering data for graphite:
therm grph 750 gr04.32t gr05.32t

% --- Cross section data library file path:
set acelib "/projects/sciteam/bbcc/serpent/xsdata/jeff312/sss_jeff312.xsdata"

% --- Vacuum boundary condition:
set bc 1

% --- Neutron population and criticality cycles:
set pop 800000 500 100

% --- Geometry plot:
plot 3 1000 1000
plot 1 1000 1000 0.0 0.0 216.0 -165.0 920.0

mesh 3 1000 1000

% --- Energy spectrum detector
ene MyEnergyGrid 3 500 1e-11 2e1
det EnergyDetector de MyEnergyGrid

% --- Spatial flux detectors
ene engrid 1 1e-11 0.625e-6 2e1
det AxialBot n dm block dx 55.1 56.5 1 dy 105.6 107 1 dz -160 0 32 de engrid
det AxialFuel n du 5 dx 55.1 56.5 1 dy 105.6 107 1 dz 0 793 80 de engrid
det AxialTop n dm block dx 55.1 56.5 1 dy 105.6 107 1 dz 793 913 32 de engrid